id: for-each-item
namespace: dev

inputs:
  - name: file
    type: FILE

tasks:
  - id: each
    type: io.kestra.core.tasks.flows.ForEachItem
    items: "{{ inputs.file }}"
    batch:
      partitions: 1000
    namespace: dev
    flowId: for-each-item-subflow
    wait: true
    transmitFailed: true
    inputs:
      items: "{{ taskrun.items }}"